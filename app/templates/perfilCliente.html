{% extends 'base.html' %}
{% load static %}
{% block stilos %}
<link rel="stylesheet" href="{% static 'css/profile.css'%}">
<link rel="stylesheet" href="{% static 'css/btnEdit.css'%}">
<link rel="stylesheet" href="{% static 'css/calificacion.css'%}">
{% endblock stilos %}
{% block appContenido %}
<main class="containerNegro">
    <!-- {% comment %} <h1>Perfil Cliente</h1>
    {% for datosC in datosC %}
    <p>{{ datosC.nombres }}</p>
    {% endfor %}
    <a href="{% url 'inactivarCuenta' %}">Inactivar cuenta</a>
    <a href="{% url 'editarPerfilC' %}">Editar cuenta</a> {% endcomment %} -->
    <div class="container">
        {%block editarPerfil%}
            <li><a href="{% url 'editarPerfilC' %}"> EDITAR PERFIL </a></li>
        {%endblock%}
        <div class="main-body">
            <div class="row cardsP gutters-sm">
                {% for datosC in datosC %}
                <div class="col-md-4 mb-3">
                    <div class="cardP cardP-body">
                        <div class="d-flex flex-column align-items-center text-center imagenPerfil">
                            <button class="subirImagen">
                                {% if datosC.foto %}
                                    <img src="{{ datosC.foto }}" alt="Admin" class="rounded-circle" width="150">
                                    {% else %}
                                    <img class="linkPerfil" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
                                {% endif %}
                            </button>
                            <div class="mt-3">
                                <h4></h4>
                                <p class=" mb-1"></p>
                                <p class="font-size-sm ">{{datosC.nombres}} {{datosC.apellidos}}</p>
                                <div class="btnActivateM">
                                    <p>Estado: {{datosC.state}}</p>
                                    <label class="switch">
                                        {% if datosC.state == "activo" %}
                                                <form action="" method="post">{% csrf_token %}
                                                    <input type='hidden' value="inactivo" name='estado'>
                                                    <button type="submit" class="btnAD"></button><input type="checkbox" checked type="submit"><span class="sliderP"></span></button>
                                                </form> 
                                                {% else %}
                                                    <form action="" method="post">{% csrf_token %}
                                                        <input type='hidden' value="activo" name='estado'>
                                                        <button type="submit" class="btnAD"><input type="checkbox" > <span class="sliderP"></span></button>
                                                    </form>
                                            {% endif %}
                                        
                                    </label>
                                    {% comment %} <button class="btn btnM btn-outline-primary">Mensaje</button> {% endcomment %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card mt-3">
                        <ul class="list-group list-group-flush" id="cambioCard">
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <a href="https://web.whatsapp.com/" target="_blank" class="mb-0 wh">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bibi-whatsapp iconsM" viewBox="0 0 16 16">
                                        <path
                                            d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z">
                                        </path>
                                    </svg>WhatsApp
                                </a>
                                <span class="colorGris">{{datosC.telefono}}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                <a href="https://mail.google.com/mail/u/0/?tab=rm&ogbl#inbox" target="_blank" class="mb-0 wh">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-envelope iconsM" viewBox="0 0 16 16">
                                        <path
                                            d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z">
                                        </path>
                                    </svg>Email
                                </a>
                                <span class="colorGris">{{datosC.email}}</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-8">
                    {% comment %} <div class="card mb-3">
                        <div class="card-body">
                            <div class="row">
                                <h4 class="col-sm-3 mb-0 alturaTamaño">Nombre(s)</h4>
                                <div class="col-sm-9">
                                    <p class="col-sm-9 text-secondary alturaTamaño" id="info1">{{ datosC.nombres }}</p>
                                    
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <h4 class="col-sm-3 mb-0 alturaTamaño">Apellidos(s)</h4>
                                <div class="col-sm-9">
                                    <p class="col-sm-9 text-secondary alturaTamaño" id="info6">{{ datosC.apellidos }}</p>
                                    
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <h4 class="col-sm-3 mb-0 alturaTamaño">Email</h4>
                                <div class="col-sm-9">
                                    <p class="col-sm-9 text-secondary alturaTamaño" id="info2">{{ datosC.email }}</p>
                                    
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <h4 class="col-sm-3 mb-0 alturaTamaño">Teléfono</h4>
                                <div class="col-sm-9">
                                    <p class="col-sm-9 text-secondary alturaTamaño" id="info3">{{ datosC.telefono }}</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row-2 filaEditar" id="row-2">
                                {% comment %} <div class="col-10 form-check form-switch editar">
                                    <input class="col-2 form-check-input align-self-center" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                                    <label class="col-10 form-check-label align-self-center pt-2" forhtml="flexSwitchCheckDefault">Editar</label>
                                </div>
                                <a href="{% url 'editarPerfilC' %}"><button class='buttonform'>Editar</button></a>
                            </div>
                        </div>
                    </div> {% endcomment %}
                    {% endfor %}
                    <div class="col-lg-14 col-xl-14 cardP-box">
                        <form action="" method="get">
                            <ul class="filtro">
                                <li class="seleccion">
                                    <h3>Fechas:</h3>
                                    <div class="ctr_select">
                                        <select class="select">
                                            <option value="todos">todos</option>
                                            {% if selectH == 'esteAnio' %}
                                                <option value="esteAnio" selected>Este Año</option>
                                            {% else %}
                                                <option value="esteAnio">Este Año</option>
                                            {% endif %}
                                            {% if selectH == 'esteMes' %}
                                                <option value="esteMes" selected>Este Mes</option>
                                            {% else %}
                                                <option value="esteMes">Este Mes</option>
                                            {% endif %}
                                            {% if selectH == 'estaSemana' %}
                                                <option value="estaSemana" selected>Esta Semana</option>
                                            {% else %}
                                                <option value="estaSemana">Esta Semana</option>
                                            {% endif %}
                                            {% if selectH == 'hoy'%}
                                                <option value="hoy" selected>Hoy</option>
                                            {% else %}
                                                <option value="hoy">Hoy</option>
                                            {% endif %}
                                        </select>
                                    </div>
                                </li>
                                <li class="seleccion">
                                    <h3>Estado:</h3>
                                    <div class="ctr_select">
                                        <select class="select">
                                            <option value="hoy">Aceptadas</option>
                                            <option value="ayer">Editadas</option>
                                            <option value="estaSemana">Eliminadas</option>
                                            <option value="estaSemana">En Espera</option>
                                        </select>
                                    </div>
                                </li>
                                <li class="seleccion">
                                    <button class="btnSearchDE">Buscar</button>
                                </li>
                            </ul>
                        </form>
                        <section class="citas">
                            <ul class="list-unstyled timeline-sm">
                                {% for citasId in citas %}
                                    <li class="timeline-sm-item">
                                        <section class="lineaFecha">
                                            <span class="timeline-sm-date">{{citasId.idHorario.fecha}}</span>
                                        </section>
                                        <section class="ctr_info">
                                            <article class="informacion">
                                                <h5 class="mt-0">{{citasId.idTrabajador.idCategoria}}: {{citasId.idServicio.tipoServicio}}</h5>
                                                <p> Peluquero: {{ citasId.idTrabajador.nombres }} {{ citasId.idTrabajador.apellidos }}</p>
                                                <p class="text-white-50 mt-2">Hora de inicio de corte: {{citasId.idHorario.horaInicio}}</p>
                                                <p class="text-white-50 mt-2">Hora de finalización de corte: {{citasId.idHorario.horaFinalizacion}}</p>
                                                <p class="text-white-50 mt-2">Direccion: {{citasId.idTrabajador.direccion}}</p>
                                            </article>
                                            {% if citas.peticion != cancelado %}
                                            <article class="verCita">
                                                <button id="btnChat{{citasId.id}}" name="btnCita{{citasId.id}}" onClick="Chat(this.id)">Chat</button>
                                                <form  action="" method="post">{% csrf_token %}
                                                    <button id="cancelar">Cancelar</button>
                                                    <input type="hidden" value="cancelado" name="peticion"></input>
                                                    <input type="hidden" value="{{citasId.id}}" name="idCita"></input>
                                                </form>
                                            </article>
                                            {% endif %}
                                        </section>
                                    </li>
                                {% endfor %}
                            </ul>
                            <ul class="acciones">
                                <section class="info_adicional">
                                    <h2>Tienes X citas pendientes</h2>
                                    <h2>Tienes X citas en espera</h2>
                                </section>
                                <section class="chat">
                                    <article class="msj_campo">
                                        <div id="messages">
                                        </div>
                                    </article>
                                    <article class="msj_enviar">
                                        <form id="form">
                                            <input type="text" name="message" placeholder="Escribe tu mensaje" autofocus size="5"/>
                                        </form>
                                        <button>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                                            <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
                                        </svg>
                                        </button>
                                    </article>
                                </section>
                                <section class="campoEditar">
                                    <h4>FORMULARIO</h4>
                                </section>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

{% block llamdoJavaScript %}
    <script src="{% static 'js/chat.js'%}"></script>
    <script src="{% static 'js/opcionesCitas.js'%}"></script>
    {% if messages %}

        {% for m in messages %}
            <script >

                Swal.fire({
                    icon:"success",
                    title: "Venta realizada",
                    text: "Bienvenido Señor Usuario",
                });

            </script>
        {% endfor %}

    {% endif %}

{% endblock llamdoJavaScript %}

{% endblock %}



